<p>
    Dynamic (Reactive) form
</p>
<form [formGroup]="form">
    <p-panel *ngFor="let filter of filters" [header]="filter.name">
        <div [ngSwitch]="filter.type">
            <div *ngSwitchCase="'flag'">
                <label>{{filter.name}}</label>
                <p-triStateCheckbox [name]="filter.id" [formControlName]="filter.id"></p-triStateCheckbox>
            </div>
            <div *ngSwitchCase="'singleChoice'">
                <p-dropdown [options]="options[filter.id]" [formControlName]="filter.id"></p-dropdown>
            </div>
            <div *ngSwitchCase="'multiChoice'">
                <p-multiSelect  [options]="options[filter.id]" [formControlName]="filter.id"></p-multiSelect>
            </div>
            <div *ngSwitchDefault>
                An error Unknwon filter type: {{filter.type}} for filter: {{filter.name}}
            </div>
        </div>
    </p-panel>
    <p-panel header = 'the Tree'>
        <p-tree selectionMode="single"
                [(selection)]="treeSelection"
                [value]="treeContent"
                (onNodeSelect)="onNodeSelected($event)"
                (onNodeExpand)="onNodeExpand($event)">
        </p-tree>
    </p-panel>
</form>
<p-panel header="(Debug) --> Model contents">
    <pre>{{ form.value | json}}
{{ selectionForDisplay | json}}
{{ treeConfig | json}}
    </pre>
</p-panel>


